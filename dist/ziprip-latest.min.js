(function(){var libraries={};var zrRequire=function(name){return libraries[name]()};libraries["./address"]=function(){var exports={};exports.address=function(){this["title"]="";this["atoms"]=[];this["postcode"]="";this["country"]="";this["lat"]=undefined;this["lon"]=undefined;this["via"]="";this.isGeocoded=function(){if(typeof this["lat"]!="undefined"&&typeof this["lon"]!="undefined"){return true}else{return false}};this.flatten=function(){var parts=[];parts=parts.concat(this["atoms"]);if(this["postcode"])parts.push(this["postcode"]);parts.push(this["country"]);return parts};this.formatForGeocode=function(){var parts=this.flatten();var country=parts[parts.length-1];if(country=="US"){parts.pop()}return parts.join(", ")};this._fieldsOnly=function(){var testObject={};var attr=["title","atoms","postcode","country","via","lat","lon"];for(var i=0;i<attr.length;i++){if(typeof this[attr[i]]=="function")continue;testObject[attr[i]]=this[attr[i]]}return testObject}};exports.addressFromFields=function(fields){var addressObject=new exports.address;for(var key in fields){addressObject[key]=fields[key]}return addressObject};return exports};libraries["./addressFromString"]=function(){var exports={};var US_STATES="(Chicago,?|Houston,?|Philadelphia,?|Phoenix,?|Alabama,?|Alaska,?|Arizona,?|Arkansas,?|California,?|Colorado,?|Connecticut,?|Delaware,?|Florida,?|Georgia,?|Hawaii,?|Idaho,?|Illinois,?|Indiana,?|Iowa,?|Kansas,?|Kentucky,?|Louisiana,?|Maine,?|Maryland,?|Massachusetts,?|Michigan,?|Minnesota,?|Mississippi,?|Missouri,?|Montana,?|North Carolina,?|North Dakota,?|Nebraska,?|Nevada,?|New Hampshire,?|New Jersey,?|New Mexico,?|New York,?|Ohio,?|Oklahoma,?|Oregon,?|Pennsylvania,?|Rhode Island,?|South Carolina,?|South Dakota,?|Tennessee,?|Texas,?|Utah,?|Vermont,?|Virginia,?|Washington,?|West Virginia,?|Wisconsin,?|Wyoming,?|American Samoa,?|D\\.C\\.,?|Guam,?|Puerto Rico,?|AL|AK|AZ|AR|CA|CO|CT|DE|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|NC|ND|NE|NV|NH|NJ|NM|NY|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY|AS|DC|GU|MP|PR|VI)";var postcodes=[{country:"UK",one_only:true,regex_string:"\\b([a-z]\\d\\s\\d[a-z][a-z]|[a-z]\\d[a-z]\\s\\d[a-z][a-z]|[a-z]\\d\\d\\s\\d[a-z][a-z]|[a-z]\\d\\d[a-z]\\s\\d[a-z][a-z]|[a-z][a-z]\\d\\s\\d[a-z][a-z]|[a-z][a-z]\\d[a-z]\\s\\d[a-z][a-z]|[a-z][a-z]\\d\\d\\s\\d[a-z][a-z])\\W?\\b"},{country:"Canada",one_only:true,regex_string:"\\b([ABCEGHJKLMNPRSTVXY]\\d[ABCEGHJKLMNPRSTVWXYZ]) ?(\\d[ABCEGHJKLMNPRSTVWXYZ]\\d)\\b"},{country:"US",one_only:false,regex_string:"\\b("+US_STATES+"\\s*,?\\s*\\d{5}(-\\d{4})?\\W?)\\b"},{country:"US",one_only:false,regex_string:"\\b(\\d{5}(-\\d{4})?\\s*\\w+\\s*,\\s*)"+US_STATES+"\\b"}];for(var i=0;i<postcodes.length;i++){postcodes[i]["regex"]=new RegExp(postcodes[i]["regex_string"],"i");postcodes[i]["regex_block"]=new RegExp("([\\s\\S]+)("+postcodes[i]["regex_string"]+")","i")}exports.addressFromString=function(toolkit,text){var addresses=[];var codes_seen={};var blocks=text.split(/\n\s*\n/);for(var i=0;i<blocks.length;i++){var block=blocks[i];var address=[];for(var ii=0;ii<postcodes.length;ii++){var country=postcodes[ii];var padded="  "+block;var match=padded.match(country["regex_block"]);if(match){var prefix=match[1];var postcode=match[2];if(country["one_only"]){if(codes_seen[postcode]){break}else{codes_seen[postcode]=1}}if(prefix.match(/\w/)){address=[prefix,postcode,country["country"]]}else{address=[postcode,country["country"]]}break}if(address.length>0){break}}if(address.length>0){addresses.push(address)}}var deletedOnTheFly=false;for(var i=0;i<addresses.length;i++){var address=addresses[i];if(address.length!=2)continue;var postcode=address[0];var foundAtoms=[];for(var it=0;it<blocks.length;it++){if(blocks[it].match(postcode)){var cursor=0;for(cursor=it-1;cursor>=0;cursor--){var block=blocks[cursor];if(block.match(/\n/)){break}if(block.match(/http:/)){break}if(block.match(/\baddress/i)){break}foundAtoms.unshift(block)}break}}if(foundAtoms.length){addresses[i]=[foundAtoms.join(", "),address[0],address[1]]}else{deletedOnTheFly=true;addresses[i]=undefined}}if(deletedOnTheFly){var newAddresses=[];for(var i=0;i<addresses.length;i++){if(addresses[i]){newAddresses.push(addresses[i])}}addresses=newAddresses}for(var i=0;i<addresses.length;i++){var prefix=addresses[i][0];var postcode=addresses[i][1];var country=addresses[i][2];prefix=prefix.replace(/^.*(Registered Offices?( is| are)?|Tel|Telephone|Website|Fax|Address)\s*:\s*/im,"");prefix=prefix.replace(/[\n|]/g,",");prefix=prefix.replace(/\u2022/g,",");prefix=prefix.replace(/%u2022/g,",");prefix=prefix.replace(/,+/g,",");prefix=prefix.replace(/,\s*$/g,"");var atoms=prefix.split(/,/);if(atoms.length==1){if(atoms[0].match(/\s\s/)){atoms=atoms[0].split(/\s\s/)}}var postAtoms=[];var orphan_number="";for(var ii=0;ii<atoms.length;ii++){var atom=atoms[ii];atom=atom.replace(/^\s*registered offices?( is| are)?/,"");atom=atom.replace(/^\s*\*\s*/,"");atom=atom.replace(/^\s+/,"");atom=atom.replace(/\s+$/,"");atom=atom.replace(/\s+/g," ");atom=atom.replace(/,$/,"");var number_only=atom.match(/^\d[ \d\-ab]*$/i);if(number_only){orphan_number=atom}else if(atom.length&&atom.length<38){if(orphan_number){atom=orphan_number+" "+atom;orphan_number=undefined}postAtoms.push(atom)}}postcode=postcode.replace(/\s+/g," ");var title=postAtoms[0];if(title==undefined||!title.length){title=postcode}addresses[i]=toolkit.addressFromFields({atoms:postAtoms,title:title,country:country,postcode:postcode})}return addresses};return exports};libraries["./cleanAddress_en"]=function(){var exports={};var streetNameRE=new RegExp(" (Road|Rd|Square|Street|St.?|Parkway|Pkwy.?|Ave.?|Avenue|Broadway|Boulevard|Blvd.?|Lane|Terrace|Place|Gardens|Yard|Court|Way|Drive|Dr.?|lazy)( (north|west|south|east))?$","i");exports.cleanAddress=function(atomsOriginal){var atoms=atomsOriginal.reverse();var newAtoms=[];for(var i=0;i<atoms.length;i++){newAtoms.unshift(atoms[i]);if(atoms[i].match(streetNameRE)){if(atoms[i].match(/\d/)){break}else{if(i+1!=atoms.length){newAtoms.unshift(atoms[i+1]);break}}}}return newAtoms};return exports};libraries["./domToText"]=function(){var exports={};exports.domToText=function(dom,toolkit){var skipNodes={head:1,script:1,style:1};var nodeMappings={h1_start:"\n\n",h2_start:"\n\n",h3_start:"\n\n",p_start:"\n",p_end:"\n",span_start:"",span_end:", ",div_start:"\n",div_end:"\n\n",li_end:"\n",br_end:"\n",td_end:"\n\n"};var capture="";function nodeGrab(node,depth,path){var localName="";if(node.nodeName){localName=node.nodeName.toLowerCase()}if(localName=="iframe"){var newDoc;try{newDoc=node.contentDocument.documentElement}catch(e){}if(newDoc){capture+="\n\n\n\n";nodeGrab(newDoc,depth+1,path+" > "+localName)}}else if(node.nodeType==3){var rText=toolkit.nodeToText(node);capture+=rText}else if(node.nodeType==1){var insertion;if(skipNodes[localName]){return}else if(insertion=nodeMappings[localName+"_start"]){capture+=insertion}for(var i=0;i<node.childNodes.length;i++){nodeGrab(node.childNodes[i],depth+1,path+" > "+localName)}if(insertion=nodeMappings[localName+"_end"]){capture+=insertion}}}nodeGrab(dom.getElementsByTagName("html")[0],0,"");return capture};return exports};libraries["./extractUsing"]=function(){var exports={};exports.extractUsing=function(dom,url,toolkit,stash,extractors){toolkit.loadSizzle(dom);var addresses=[];for(var i=0;i<extractors.length;i++){var found=extractors[i](dom,url,toolkit,stash);if(found&&found.length>0){addresses=found;break}}for(var i=0;i<addresses.length;i++){if(addresses[i]["via"]=="Generic"){addresses[i]["atoms"]=toolkit.cleanAddress(addresses[i]["atoms"])}}if(addresses.length==1){if(stash["hint"]){if(!addresses[0]["lat"]){addresses[0]["lat"]=stash["hint"][0];addresses[0]["lon"]=stash["hint"][1]}}}return addresses};return exports};libraries["./extractorFromText"]=function(){var exports={};exports.extractor=function(dom,url,toolkit,stash){var documentAsText=toolkit.domToText(dom,toolkit);var addresses=toolkit.addressFromString(toolkit,documentAsText);for(var i=0;i<addresses.length;i++){addresses[i]["via"]="Generic"}return addresses};return exports};libraries["./extractorGoogle"]=function(){var exports={};exports.extractor=function(dom,url,toolkit,stash){var rhsBlock=toolkit.sz('#rhs_block .rhsvw a[href*="daddr"]',dom)[0];if(rhsBlock){var found=extractDURLS([rhsBlock])[0];if(found){var title=toolkit.sz("#rhs_block .rhsvw b",dom)[0];if(title&&toolkit.nodeToText(title)){found["title"]=toolkit.nodeToText(title)}found["via"]="Google RHS";return[found]}}var ppMarkers=toolkit.sz("#pp-marker-json",dom)[0];if(ppMarkers){var markerContent=toolkit.nodeToText(ppMarkers);var addresses=extractPPMarker(markerContent);if(addresses.length){return addresses}}var gurls=toolkit.sz("div[g\\:url]",dom);var found=extractGURLS(gurls);if(found.length){return found}var durls=toolkit.sz('a[href*="daddr"]',dom);var dfound=extractDURLS(durls);if(dfound.length){return dfound}var hints=toolkit.sz('a[href*="mapclient=jsapi"]',dom);if(hints.length==1){var url=hints[0].getAttribute("href");url=toolkit.uri(url);if(url.host().match("maps.google")){var ll=url.decode(url.getQueryParamValue("ll")).split(",");if(ll[0]&&ll[1]){stash.hint=ll}}}function extractDURLS(durls){var addresses=[];for(var i=0;i<durls.length;i++){var durl=durls[i];var url=toolkit.uri(durl.getAttribute("href"));if(!url.host().match("maps.google")){continue}var daddr=url.decode(url.getQueryParamValue("daddr"));var parsedAddress=toolkit.addressFromString(toolkit,daddr)[0];if(!parsedAddress){continue}var geocode=url.decode(url.getQueryParamValue("geocode"));if(geocode){var atoms=geocode.split(/,/);if(atoms.length!=3){continue}parsedAddress["lat"]=atoms[1];parsedAddress["lon"]=atoms[2];parsedAddress["via"]="Google Driving"}else{continue}if(durls.length==1){var lclbox=toolkit.sz('*[id="lclbox"]',dom)[0];if(lclbox){var title=toolkit.sz('*[class="wrt"]',lclbox)[0];if(title){parsedAddress["title"]=toolkit.nodeToText(title)}}}addresses.push(parsedAddress)}return addresses}function extractGURLS(gurls){var addresses=[];var seen={};for(var i=0;i<gurls.length;i++){var url=gurls[i].getAttribute("g:url");if(seen[url]){continue}seen[url]=1;url=url.replace(/^ID:\/\//,"");url=toolkit.uri(url);if(!url.host().match("maps.google")){continue}var address=url.decode(url.getQueryParamValue("q"));var parts=address.split(/loc\:/);var title=parts[0];var street=parts[1];title=title.replace(/[\-\d\(\)\ \+]+$/g,"");title=title.replace(/\s*$/g,"");title=title.replace(/^\s*/g,"");title=title.replace(/\s+/g," ");var parsedAddress=toolkit.addressFromString(toolkit,street)[0];if(!parsedAddress){continue}var ll=url.getQueryParamValue("sll").split(/,/);parsedAddress["lat"]=ll[0];parsedAddress["lon"]=ll[1];parsedAddress["title"]=title;parsedAddress["via"]="Google g:url";addresses.push(parsedAddress)}return addresses}function extractPPMarker(text){text=text.replace(/(\w+):/g,'"$1":');try{var jsonD=toolkit.json.parse(text);var title=jsonD["infoWindow"]["title"];var asText=jsonD["infoWindow"]["addressLines"].join(",");var lat=jsonD["latlng"]["lat"]+0;var lon=jsonD["latlng"]["lng"]+0}catch(e){return[]}if(!asText.length){return[]}var parsedAddress=toolkit.addressFromString(toolkit,asText)[0];if(!parsedAddress){return[]}if(title.length){parsedAddress["title"]=title}if(lat&&lon){parsedAddress["lat"]=lat;parsedAddress["lon"]=lon}parsedAddress["via"]="Google pp-marker";return[parsedAddress]}};return exports};libraries["./extractorHVCard"]=function(){var exports={};exports.extractor=function(dom,url,toolkit,stash){var addresses=[];var seen={};var cardElements=toolkit.sz('*[class~="hcard"],*[class~="vcard"]');for(var i=0;i<cardElements.length;i++){var card=cardElements[i];var orgName;var org=toolkit.sz('*[class~="org"]',card)[0];if(org)orgName=toolkit.nodeToText(org);var addr=toolkit.sz('*[class~="adr"]',card)[0];if(!addr)continue;var asText="";var parts=["street-address","extended-adddress","locality","region","postal-code","country-name"];for(var ii=0;ii<parts.length;ii++){var part=parts[ii];var atom=toolkit.sz('*[class~="'+part+'"]',addr)[0];if(atom){var val=toolkit.nodeToText(atom);if(part=="postal-code"){val=val.replace(/^\s*(\d\d\d\d\d)(\d\d\d\d)\s*$/,"$1-$2")}if(part=="region"){asText+=val+" "}else{asText+=val+"\n"}}}if(!seen[asText]){seen[asText]=1;var parsedAddress=toolkit.addressFromString(toolkit,asText)[0];if(parsedAddress){parsedAddress["atoms"]=toolkit.cleanAddress(parsedAddress["atoms"]);parsedAddress["via"]="hvCard";if(orgName){parsedAddress["title"]=orgName;if(parsedAddress["atoms"][0]==orgName){parsedAddress["atoms"].shift()}}addresses.push(parsedAddress)}}}return addresses};return exports};libraries["./json2"]=function(){var exports={};zrJSON={};(function(){"use strict";function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof zrJSON.stringify!=="function"){zrJSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else if(typeof space==="string"){indent=space}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("zrJSON.stringify")}return str("",{"":value})}}if(typeof zrJSON.parse!=="function"){zrJSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("zrJSON.parse")}}})();exports.json=zrJSON;return exports};libraries["./jsuri"]=function(){var exports={};var Query=function(queryString){"use strict";var parseQuery=function(q){var arr=[],i,ps,p,keyval;if(typeof q==="undefined"||q===null||q===""){return arr}if(q.indexOf("?")===0){q=q.substring(1)}ps=q.toString().split(/[&;]/);for(i=0;i<ps.length;i++){p=ps[i];keyval=p.split("=");arr.push([keyval[0],keyval[1]])}return arr},params=parseQuery(queryString),toString=function(){var s="",i,param;for(i=0;i<params.length;i++){param=params[i];if(s.length>0){s+="&"}s+=param.join("=")}return s.length>0?"?"+s:s},decode=function(s){s=decodeURIComponent(s);s=s.replace(/\+/g," ");return s},getParamValue=function(key){var param,i;for(i=0;i<params.length;i++){param=params[i];if(decode(key)===decode(param[0])){return param[1]}}},getParamValues=function(key){var arr=[],i,param;for(i=0;i<params.length;i++){param=params[i];if(decode(key)===decode(param[0])){arr.push(param[1])}}return arr},deleteParam=function(key,val){var arr=[],i,param,keyMatchesFilter,valMatchesFilter;for(i=0;i<params.length;i++){param=params[i];keyMatchesFilter=decode(param[0])===decode(key);valMatchesFilter=decode(param[1])===decode(val);if(arguments.length===1&&!keyMatchesFilter||arguments.length===2&&!keyMatchesFilter&&!valMatchesFilter){arr.push(param)}}params=arr;return this},addParam=function(key,val,index){if(arguments.length===3&&index!==-1){index=Math.min(index,params.length);params.splice(index,0,[key,val])}else if(arguments.length>0){params.push([key,val])}return this},replaceParam=function(key,newVal,oldVal){var index=-1,i,param;if(arguments.length===3){for(i=0;i<params.length;i++){param=params[i];if(decode(param[0])===decode(key)&&decodeURIComponent(param[1])===decode(oldVal)){index=i;break}}deleteParam(key,oldVal).addParam(key,newVal,index)}else{for(i=0;i<params.length;i++){param=params[i];if(decode(param[0])===decode(key)){index=i;break}}deleteParam(key);addParam(key,newVal,index)}return this};return{getParamValue:getParamValue,getParamValues:getParamValues,deleteParam:deleteParam,addParam:addParam,replaceParam:replaceParam,decode:decode,toString:toString}};exports.uri=function(uriString){"use strict";var strictMode=false,parseUri=function(str){var parsers={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},keys=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q={name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},m=parsers[strictMode?"strict":"loose"].exec(str),uri={},i=14;while(i--){uri[keys[i]]=m[i]||""}uri[q.name]={};uri[keys[12]].replace(q.parser,function($0,$1,$2){if($1){uri[q.name][$1]=$2}});return uri},uriParts=parseUri(uriString||""),queryObj=new Query(uriParts["query"]),protocol=function(val){if(typeof val!=="undefined"){uriParts["protocol"]=val}return uriParts["protocol"]},hasAuthorityPrefixUserPref=null,hasAuthorityPrefix=function(val){if(typeof val!=="undefined"){hasAuthorityPrefixUserPref=val}if(hasAuthorityPrefixUserPref===null){return uriParts["source"].indexOf("//")!==-1}else{return hasAuthorityPrefixUserPref}},userInfo=function(val){if(typeof val!=="undefined"){uriParts["userInfo"]=val}return uriParts["userInfo"]},host=function(val){if(typeof val!=="undefined"){uriParts["host"]=val}return uriParts["host"]},port=function(val){if(typeof val!=="undefined"){uriParts["port"]=val}return uriParts["port"]},path=function(val){if(typeof val!=="undefined"){uriParts["path"]=val}return uriParts["path"]},query=function(val){if(typeof val!=="undefined"){queryObj=new Query(val)}return queryObj},anchor=function(val){if(typeof val!=="undefined"){uriParts["anchor"]=val}return uriParts["anchor"]},setProtocol=function(val){protocol(val);return this},setHasAuthorityPrefix=function(val){hasAuthorityPrefix(val);return this},setUserInfo=function(val){userInfo(val);return this},setHost=function(val){host(val);return this},setPort=function(val){port(val);return this},setPath=function(val){path(val);return this},setQuery=function(val){query(val);return this},setAnchor=function(val){anchor(val);return this},getQueryParamValue=function(key){return query().getParamValue(key)},getQueryParamValues=function(key){return query().getParamValues(key)},decode=function(key){return query().decode(key)},deleteQueryParam=function(key,val){if(arguments.length===2){query().deleteParam(key,val)}else{query().deleteParam(key)}return this},addQueryParam=function(key,val,index){if(arguments.length===3){query().addParam(key,val,index)}else{query().addParam(key,val)}return this},replaceQueryParam=function(key,newVal,oldVal){if(arguments.length===3){query().replaceParam(key,newVal,oldVal)}else{query().replaceParam(key,newVal)}return this},toString=function(){var s="",is=function(s){return s!==null&&s!==""};if(is(protocol())){s+=protocol();if(protocol().indexOf(":")!==protocol().length-1){s+=":"}s+="//"}else{if(hasAuthorityPrefix()&&is(host())){s+="//"}}if(is(userInfo())&&is(host())){s+=userInfo();if(userInfo().indexOf("@")!==userInfo().length-1){s+="@"}}if(is(host())){s+=host();if(is(port())){s+=":"+port()}}if(is(path())){s+=path()}else{if(is(host())&&(is(query().toString())||is(anchor()))){s+="/"}}if(is(query().toString())){if(query().toString().indexOf("?")!==0){s+="?"}s+=query().toString()}if(is(anchor())){if(anchor().indexOf("#")!==0){s+="#"}s+=anchor()}return s},clone=function(){return new Uri(toString())};return{protocol:protocol,hasAuthorityPrefix:hasAuthorityPrefix,userInfo:userInfo,host:host,port:port,path:path,query:query,anchor:anchor,setProtocol:setProtocol,setHasAuthorityPrefix:setHasAuthorityPrefix,setUserInfo:setUserInfo,setHost:setHost,setPort:setPort,setPath:setPath,setQuery:setQuery,setAnchor:setAnchor,getQueryParamValue:getQueryParamValue,getQueryParamValues:getQueryParamValues,deleteQueryParam:deleteQueryParam,addQueryParam:addQueryParam,replaceQueryParam:replaceQueryParam,decode:decode,toString:toString,clone:clone}};return exports};libraries["./nodeToText"]=function(){var exports={};exports.nodeToText=function(elem){var text="";try{text=elem.textContent.replace(/\n/g," ");return text}catch(e){1}try{if(elem.nodeType==3){text=elem.nodeValue}else if(elem.noteType==1){text=elem.innerText.replace(/\n/g," ");return text}}catch(e){1}return text};return exports};libraries["./sizzle"]=function(){var exports={};var currentSizzle;exports.sz=function(selector){return currentSizzle(selector)};exports.loadSizzle=function(dom,context){currentSizzle=instantiateSizzle(dom,context)};var instantiateSizzle=function(dom,undefined){var cachedruns,dirruns,sortOrder,siblingCheck,assertGetIdNotName,docElem=dom.documentElement,strundefined="undefined",hasDuplicate=false,baseHasDuplicate=true,done=0,slice=[].slice,push=[].push,expando=("sizcache"+Math.random()).replace(".",""),whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),operators="([*^$|!~]?=)",attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:"+operators+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|((?:[^,]|\\\\,|(?:,(?=[^\\[]*\\]))|(?:,(?=[^\\(]*\\))))*))\\)|)",pos=":(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\)|)(?=[^-]|$)",combinators=whitespace+"*([\\x20\\t\\r\\n\\f>+~])"+whitespace+"*",groups="(?=[^\\x20\\t\\r\\n\\f])(?:\\\\.|"+attributes+"|"+pseudos.replace(2,7)+"|[^\\\\(),])+",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcombinators=new RegExp("^"+combinators),rgroups=new RegExp(groups+"?(?="+whitespace+"*,|$)","g"),rselector=new RegExp("^(?:(?!,)(?:(?:^|,)"+whitespace+"*"+groups+")*?|"+whitespace+"*(.*?))(\\)|$)"),rtokens=new RegExp(groups.slice(19,-6)+"\\x20\\t\\r\\n\\f>+~])+|"+combinators,"g"),rquickExpr=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,rsibling=/[\x20\t\r\n\f]*[+~]/,rendsWithNot=/:not\($/,rheader=/h\d/i,rinputs=/input|select|textarea|button/i,rbackslash=/\\(?!\\)/g,matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),NAME:new RegExp("^\\[name=['\"]?("+characterEncoding+")['\"]?\\]"),TAG:new RegExp("^("+characterEncoding.replace("[-","[-\\*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|nth|last|first)-child(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),POS:new RegExp(pos,"ig"),needsContext:new RegExp("^"+whitespace+"*[>+~]|"+pos,"i")},classCache={},cachedClasses=[],compilerCache={},cachedSelectors=[],markFunction=function(fn){fn.sizzleFilter=true;return fn},createInputFunction=function(type){return function(elem){return elem.nodeName.toLowerCase()==="input"&&elem.type===type}},createButtonFunction=function(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type}},assert=function(fn){var pass=false,div=dom.createElement("div");try{pass=fn(div)}catch(e){}div=null;return pass},assertAttributes=assert(function(div){div.innerHTML="<select></select>";var type=typeof div.lastChild.getAttribute("multiple");return type!=="boolean"&&type!=="string"}),assertUsableName=assert(function(div){div.id=expando+0;div.innerHTML="<a name='"+expando+"'></a><div name='"+expando+"'></div>";docElem.insertBefore(div,docElem.firstChild);var pass=dom.getElementsByName&&dom.getElementsByName(expando).length===2+dom.getElementsByName(expando+0).length;assertGetIdNotName=!dom.getElementById(expando);docElem.removeChild(div);return pass}),assertTagNameNoComments=assert(function(div){div.appendChild(dom.createComment(""));return div.getElementsByTagName("*").length===0}),assertHrefNotNormalized=assert(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild&&typeof div.firstChild.getAttribute!==strundefined&&div.firstChild.getAttribute("href")==="#"}),assertUsableClassName=assert(function(div){div.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!div.getElementsByClassName||div.getElementsByClassName("e").length===0){return false}div.lastChild.className="e";return div.getElementsByClassName("e").length!==1});var Sizzle=function(selector,context,results,seed){results=results||[];context=context||dom;var match,elem,xml,m,nodeType=context.nodeType;if(nodeType!==1&&nodeType!==9){return[]}if(!selector||typeof selector!=="string"){return results}xml=isXML(context);if(!xml&&!seed){if(match=rquickExpr.exec(selector)){if(m=match[1]){if(nodeType===9){elem=context.getElementById(m);if(elem&&elem.parentNode){if(elem.id===m){results.push(elem);return results}}else{return results}}else{if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results}}}else if(match[2]){push.apply(results,slice.call(context.getElementsByTagName(selector),0));return results}else if((m=match[3])&&assertUsableClassName&&context.getElementsByClassName){push.apply(results,slice.call(context.getElementsByClassName(m),0));return results}}}return select(selector,context,results,seed,xml)};var Expr=Sizzle.selectors={cacheLength:50,match:matchExpr,order:["ID","TAG"],attrHandle:{},createPseudo:markFunction,find:{ID:assertGetIdNotName?function(id,context,xml){if(typeof context.getElementById!==strundefined&&!xml){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}}:function(id,context,xml){if(typeof context.getElementById!==strundefined&&!xml){var m=context.getElementById(id);return m?m.id===id||typeof m.getAttributeNode!==strundefined&&m.getAttributeNode("id").value===id?[m]:undefined:[]}},TAG:assertTagNameNoComments?function(tag,context){if(typeof context.getElementsByTagName!==strundefined){return context.getElementsByTagName(tag)}}:function(tag,context){var results=context.getElementsByTagName(tag);if(tag==="*"){var elem,tmp=[],i=0;for(;elem=results[i];i++){if(elem.nodeType===1){tmp.push(elem)}}return tmp}return results}},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){match[1]=match[1].replace(rbackslash,"");match[3]=(match[4]||match[5]||"").replace(rbackslash,"");if(match[2]==="~="){match[3]=" "+match[3]+" "}return match.slice(0,4)},CHILD:function(match){match[1]=match[1].toLowerCase();if(match[1]==="nth"){if(!match[2]){Sizzle.error(match[0])}match[3]=+(match[3]?match[4]+(match[5]||1):2*(match[2]==="even"||match[2]==="odd"));match[4]=+(match[6]+match[7]||match[2]==="odd")}else if(match[2]){Sizzle.error(match[0])}return match},PSEUDO:function(match){var argument,unquoted=match[4];if(matchExpr["CHILD"].test(match[0])){return null}if(unquoted&&(argument=rselector.exec(unquoted))&&argument.pop()){match[0]=match[0].slice(0,argument[0].length-unquoted.length-1);unquoted=argument[0].slice(0,-1)}match.splice(2,3,unquoted||match[3]);return match}},filter:{ID:assertGetIdNotName?function(id){id=id.replace(rbackslash,"");return function(elem){return elem.getAttribute("id")===id}}:function(id){id=id.replace(rbackslash,"");return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===id}},TAG:function(nodeName){if(nodeName==="*"){return function(){return true}}nodeName=nodeName.replace(rbackslash,"").toLowerCase();return function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className];if(!pattern){pattern=classCache[className]=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)");cachedClasses.push(className);if(cachedClasses.length>Expr.cacheLength){delete classCache[cachedClasses.shift()]}}return function(elem){return pattern.test(elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||"")}},ATTR:function(name,operator,check){if(!operator){return function(elem){return Sizzle.attr(elem,name)!=null}}return function(elem){var result=Sizzle.attr(elem,name),value=result+"";if(result==null){return operator==="!="}switch(operator){case"=":return value===check;case"!=":return value!==check;case"^=":return check&&value.indexOf(check)===0;case"*=":return check&&value.indexOf(check)>-1;case"$=":return check&&value.substr(value.length-check.length)===check;case"~=":return(" "+value+" ").indexOf(check)>-1;case"|=":return value===check||value.substr(0,check.length+1)===check+"-"}}},CHILD:function(type,argument,first,last){if(type==="nth"){var doneName=done++;return function(elem){var parent,diff,count=0,node=elem;if(first===1&&last===0){return true}parent=elem.parentNode;if(parent&&(parent[expando]!==doneName||!elem.sizset)){for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){node.sizset=++count;if(node===elem){break}}}parent[expando]=doneName}diff=elem.sizset-last;if(first===0){return diff===0}else{return diff%first===0&&diff/first>=0}}}return function(elem){var node=elem;switch(type){case"only":case"first":while(node=node.previousSibling){if(node.nodeType===1){return false}}if(type==="first"){return true}node=elem;case"last":while(node=node.nextSibling){if(node.nodeType===1){return false}}return true}}},PSEUDO:function(pseudo,argument,context,xml){var fn=Expr.pseudos[pseudo]||Expr.pseudos[pseudo.toLowerCase()];if(!fn){Sizzle.error("unsupported pseudo: "+pseudo)}if(!fn.sizzleFilter){return fn}return fn(argument,context,xml)}},pseudos:{not:markFunction(function(selector,context,xml){var matcher=compile(selector.replace(rtrim,"$1"),context,xml);return function(elem){return!matcher(elem)}}),enabled:function(elem){return elem.disabled===false},disabled:function(elem){return elem.disabled===true},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return nodeName==="input"&&!!elem.checked||nodeName==="option"&&!!elem.selected},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex}return elem.selected===true},parent:function(elem){return!Expr.pseudos["empty"](elem)},empty:function(elem){var nodeType;elem=elem.firstChild;while(elem){if(elem.nodeName>"@"||(nodeType=elem.nodeType)===3||nodeType===4){return false}elem=elem.nextSibling}return true},contains:markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),header:function(elem){return rheader.test(elem.nodeName)},text:function(elem){var type,attr;return elem.nodeName.toLowerCase()==="input"&&(type=elem.type)==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()===type)},radio:createInputFunction("radio"),checkbox:createInputFunction("checkbox"),file:createInputFunction("file"),password:createInputFunction("password"),image:createInputFunction("image"),submit:createButtonFunction("submit"),reset:createButtonFunction("reset"),button:function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button"},input:function(elem){return rinputs.test(elem.nodeName)},focus:function(elem){var doc=elem.ownerDocument;return elem===doc.activeElement&&(!doc.hasFocus||doc.hasFocus())&&!!(elem.type||elem.href)},active:function(elem){return elem===elem.ownerDocument.activeElement}},setFilters:{first:function(elements,argument,not){return not?elements.slice(1):[elements[0]]},last:function(elements,argument,not){var elem=elements.pop();return not?elements:[elem]},even:function(elements,argument,not){var results=[],i=not?1:0,len=elements.length;for(;i<len;i=i+2){results.push(elements[i])}return results},odd:function(elements,argument,not){var results=[],i=not?0:1,len=elements.length;for(;i<len;i=i+2){results.push(elements[i])}return results},lt:function(elements,argument,not){return not?elements.slice(+argument):elements.slice(0,+argument)},gt:function(elements,argument,not){return not?elements.slice(0,+argument+1):elements.slice(+argument+1)},eq:function(elements,argument,not){var elem=elements.splice(+argument,1);return not?elements:elem}}};Expr.setFilters["nth"]=Expr.setFilters["eq"];Expr.filters=Expr.pseudos;if(!assertHrefNotNormalized){Expr.attrHandle={href:function(elem){return elem.getAttribute("href",2)},type:function(elem){return elem.getAttribute("type")}}}if(assertUsableName){Expr.order.push("NAME");Expr.find["NAME"]=function(name,context){if(typeof context.getElementsByName!==strundefined){return context.getElementsByName(name)}}}if(assertUsableClassName){Expr.order.splice(1,0,"CLASS");Expr.find["CLASS"]=function(className,context,xml){if(typeof context.getElementsByClassName!==strundefined&&!xml){return context.getElementsByClassName(className)}}}try{slice.call(docElem.childNodes,0)[0].nodeType}catch(e){slice=function(i){var elem,results=[];for(;elem=this[i];i++){results.push(elem)}return results}}var isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};var contains=Sizzle.contains=docElem.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:docElem.contains?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&adown.contains&&adown.contains(bup))}:function(a,b){while(b=b.parentNode){if(b===a){return true}}return false};var getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem)}}}else if(nodeType===3||nodeType===4){return elem.nodeValue}}else{for(;node=elem[i];i++){ret+=getText(node)}}return ret};Sizzle.attr=function(elem,name){var attr,xml=isXML(elem);if(!xml){name=name.toLowerCase()}if(Expr.attrHandle[name]){return Expr.attrHandle[name](elem)}if(assertAttributes||xml){return elem.getAttribute(name)}attr=elem.getAttributeNode(name);return attr?typeof elem[name]==="boolean"?elem[name]?name:null:attr.specified?attr.value:null:null};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};[0,0].sort(function(){return baseHasDuplicate=0});if(docElem.compareDocumentPosition){sortOrder=function(a,b){if(a===b){hasDuplicate=true;return 0}return(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?-1:1}}else{sortOrder=function(a,b){if(a===b){hasDuplicate=true;return 0}else if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex}var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup){return siblingCheck(a,b)}else if(!aup){return-1}else if(!bup){return 1}while(cur){ap.unshift(cur);cur=cur.parentNode}cur=bup;while(cur){bp.unshift(cur);cur=cur.parentNode}al=ap.length;bl=bp.length;for(var i=0;i<al&&i<bl;i++){if(ap[i]!==bp[i]){return siblingCheck(ap[i],bp[i])}}return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1)};siblingCheck=function(a,b,ret){if(a===b){return ret}var cur=a.nextSibling;while(cur){if(cur===b){return-1}cur=cur.nextSibling}return 1}}Sizzle.uniqueSort=function(results){var elem,i=1;if(sortOrder){hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(;elem=results[i];i++){if(elem===results[i-1]){results.splice(i--,1)}}}}return results};function multipleContexts(selector,contexts,results,seed){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results,seed)}}function handlePOSGroup(selector,posfilter,argument,contexts,seed,not){var results,fn=Expr.setFilters[posfilter.toLowerCase()];if(!fn){Sizzle.error(posfilter)}if(selector||!(results=seed)){multipleContexts(selector||"*",contexts,results=[],seed)}return results.length>0?fn(results,argument,not):[]}function handlePOS(selector,context,results,seed,groups){var match,not,anchor,ret,elements,currentContexts,part,lastIndex,i=0,len=groups.length,rpos=matchExpr["POS"],rposgroups=new RegExp("^"+rpos.source+"(?!"+whitespace+")","i"),setUndefined=function(){var i=1,len=arguments.length-2;for(;i<len;i++){if(arguments[i]===undefined){match[i]=undefined}}};for(;i<len;i++){rpos.exec("");selector=groups[i];ret=[];anchor=0;elements=seed;while(match=rpos.exec(selector)){lastIndex=rpos.lastIndex=match.index+match[0].length;if(lastIndex>anchor){part=selector.slice(anchor,match.index);anchor=lastIndex;currentContexts=[context];if(rcombinators.test(part)){if(elements){currentContexts=elements}elements=seed}if(not=rendsWithNot.test(part)){part=part.slice(0,-5).replace(rcombinators,"$&*")}if(match.length>1){match[0].replace(rposgroups,setUndefined)}elements=handlePOSGroup(part,match[1],match[2],currentContexts,elements,not)}}if(elements){ret=ret.concat(elements);if((part=selector.slice(anchor))&&part!==")"){multipleContexts(part,ret,results,seed)}else{push.apply(results,ret)}}else{Sizzle(selector,context,results,seed)}}return len===1?results:Sizzle.uniqueSort(results)}function tokenize(selector,context,xml){var tokens,soFar,type,groups=[],i=0,match=rselector.exec(selector),matched=!match.pop()&&!match.pop(),selectorGroups=matched&&selector.match(rgroups)||[""],preFilters=Expr.preFilter,filters=Expr.filter,checkContext=!xml&&context!==dom;for(;(soFar=selectorGroups[i])!=null&&matched;i++){groups.push(tokens=[]);if(checkContext){soFar=" "+soFar}while(soFar){matched=false;if(match=rcombinators.exec(soFar)){soFar=soFar.slice(match[0].length);matched=tokens.push({part:match.pop().replace(rtrim," "),captures:match})}for(type in filters){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match,context,xml)))){soFar=soFar.slice(match.shift().length);matched=tokens.push({part:type,captures:match})}}if(!matched){break}}}if(!matched){Sizzle.error(selector)}return groups}function addCombinator(matcher,combinator,context){var dir=combinator.dir,doneName=done++;if(!matcher){matcher=function(elem){return elem===context}}return combinator.first?function(elem,context){while(elem=elem[dir]){if(elem.nodeType===1){return matcher(elem,context)&&elem}}}:function(elem,context){var cache,dirkey=doneName+"."+dirruns,cachedkey=dirkey+"."+cachedruns;while(elem=elem[dir]){if(elem.nodeType===1){if((cache=elem[expando])===cachedkey){return elem.sizset}else if(typeof cache==="string"&&cache.indexOf(dirkey)===0){if(elem.sizset){return elem}}else{elem[expando]=cachedkey;if(matcher(elem,context)){elem.sizset=true;return elem}elem.sizset=false}}}}}function addMatcher(higher,deeper){return higher?function(elem,context){var result=deeper(elem,context);return result&&higher(result===true?elem:result,context)}:deeper}function matcherFromTokens(tokens,context,xml){var token,matcher,i=0;for(;token=tokens[i];i++){if(Expr.relative[token.part]){matcher=addCombinator(matcher,Expr.relative[token.part],context)}else{token.captures.push(context,xml);matcher=addMatcher(matcher,Expr.filter[token.part].apply(null,token.captures))}}return matcher}function matcherFromGroupMatchers(matchers){return function(elem,context){var matcher,j=0;for(;matcher=matchers[j];j++){if(matcher(elem,context)){return true}}return false}}var compile=Sizzle.compile=function(selector,context,xml){var tokens,group,i,cached=compilerCache[selector];if(cached&&cached.context===context){return cached}group=tokenize(selector,context,xml);for(i=0;tokens=group[i];i++){group[i]=matcherFromTokens(tokens,context,xml)}cached=compilerCache[selector]=matcherFromGroupMatchers(group);cached.context=context;cached.runs=cached.dirruns=0;cachedSelectors.push(selector);if(cachedSelectors.length>Expr.cacheLength){delete compilerCache[cachedSelectors.shift()]}return cached};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)};Sizzle.matchesSelector=function(elem,expr){return Sizzle(expr,null,null,[elem]).length>0};var select=function(selector,context,results,seed,xml){selector=selector.replace(rtrim,"$1");var elements,matcher,i,len,elem,token,type,findContext,notTokens,match=selector.match(rgroups),tokens=selector.match(rtokens),contextNodeType=context.nodeType;if(matchExpr["POS"].test(selector)){return handlePOS(selector,context,results,seed,match)}if(seed){elements=slice.call(seed,0)}else if(match&&match.length===1){if(tokens.length>1&&contextNodeType===9&&!xml&&(match=matchExpr["ID"].exec(tokens[0]))){context=Expr.find["ID"](match[1],context,xml)[0];if(!context){return results}selector=selector.slice(tokens.shift().length)}findContext=(match=rsibling.exec(tokens[0]))&&!match.index&&context.parentNode||context;notTokens=tokens.pop();token=notTokens.split(":not")[0];for(i=0,len=Expr.order.length;i<len;i++){type=Expr.order[i];if(match=matchExpr[type].exec(token)){elements=Expr.find[type]((match[1]||"").replace(rbackslash,""),findContext,xml);if(elements==null){continue}if(token===notTokens){selector=selector.slice(0,selector.length-notTokens.length)+token.replace(matchExpr[type],"");if(!selector){push.apply(results,slice.call(elements,0))}}break}}}if(selector){matcher=compile(selector,context,xml);dirruns=matcher.dirruns++;if(elements==null){elements=Expr.find["TAG"]("*",rsibling.test(selector)&&context.parentNode||context)}for(i=0;elem=elements[i];i++){cachedruns=matcher.runs++;if(matcher(elem,context)){results.push(elem)}}}return results};if(dom.querySelectorAll){(function(){var disconnectedMatch,oldSelect=select,rescape=/'|\\/g,rattributeQuotes=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,rbuggyQSA=[],rbuggyMatches=[":active"],matches=docElem.matchesSelector||docElem.mozMatchesSelector||docElem.webkitMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector;assert(function(div){div.innerHTML="<select><option selected></option></select>";if(!div.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)")}if(!div.querySelectorAll(":checked").length){rbuggyQSA.push(":checked")}});assert(function(div){div.innerHTML="<p test=''></p>";if(div.querySelectorAll("[test^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:\"\"|'')")}div.innerHTML="<input type='hidden'>";if(!div.querySelectorAll(":enabled").length){rbuggyQSA.push(":enabled",":disabled")}});rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));select=function(selector,context,results,seed,xml){if(!seed&&!xml&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(context.nodeType===9){try{push.apply(results,slice.call(context.querySelectorAll(selector),0));return results}catch(qsaError){}}else if(context.nodeType===1&&context.nodeName.toLowerCase()!=="object"){var old=context.getAttribute("id"),nid=old||expando,newContext=rsibling.test(selector)&&context.parentNode||context;if(old){nid=nid.replace(rescape,"\\$&")}else{context.setAttribute("id",nid)}try{push.apply(results,slice.call(newContext.querySelectorAll(selector.replace(rgroups,"[id='"+nid+"'] $&")),0));return results}catch(qsaError){}finally{if(!old){context.removeAttribute("id")}}}}return oldSelect(selector,context,results,seed,xml)};if(matches){assert(function(div){disconnectedMatch=matches.call(div,"div");try{matches.call(div,"[test!='']:sizzle");rbuggyMatches.push(Expr.match.PSEUDO)}catch(e){}});rbuggyMatches=new RegExp(rbuggyMatches.join("|"));Sizzle.matchesSelector=function(elem,expr){expr=expr.replace(rattributeQuotes,"='$1']");if(!isXML(elem)&&!rbuggyMatches.test(expr)&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||disconnectedMatch||elem.document&&elem.dom.nodeType!==11){return ret}}catch(e){}}return Sizzle(expr,null,null,[elem]).length>0}}})()}return Sizzle};return exports};libraries["./toolkit"]=function(){var exports={};exports.cleanAddress=zrRequire("./cleanAddress_en")["cleanAddress"];exports.nodeToText=zrRequire("./nodeToText")["nodeToText"];exports.domToText=zrRequire("./domToText")["domToText"];exports.addressFromString=zrRequire("./addressFromString")["addressFromString"];exports.json=zrRequire("./json2")["json"];var sizzle=zrRequire("./sizzle");exports.sz=sizzle["sz"];exports.loadSizzle=sizzle["loadSizzle"];exports.uri=zrRequire("./jsuri")["uri"];var address=zrRequire("./address");exports.address=address["address"];exports.addressFromFields=address["addressFromFields"];return exports};libraries["./ziprip"]=function(){var exports={};exports._zipripToolkit=zrRequire("./toolkit");var extractorModules=["Google","HVCard","FromText"];var extractors=[];for(var i=0;i<extractorModules.length;i++){var extractor=zrRequire("./extractor"+extractorModules[i])["extractor"];extractors.push(extractor)}var extractUsing=zrRequire("./extractUsing")["extractUsing"];exports.extract=function(dom,url){return extractUsing(dom,url,exports._zipripToolkit,{},extractors)};exports.version="0.0.1";return exports};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=zrRequire("./ziprip")}exports.ziprip=zrRequire("./ziprip")}else{this["ziprip"]=zrRequire("./ziprip")}}).call(this);